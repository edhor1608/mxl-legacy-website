---
import { Picture } from "astro:assets";

const links = [
  { href: "/#hero", label: "Start" },
  { href: "/#hall-of-fame", label: "Hall of Fame" },
  { href: "/#timeline", label: "Zeitleiste" },
  { href: "/#gallery", label: "Galerie" },
  { href: "/about", label: "Über" },
];
---

<header class="sticky top-0 z-50">
  <div
    class="px-4 border-b border-[#F4F4F4]/10 bg-[#201D1F]/70 backdrop-blur supports-[backdrop-filter]:bg-[#201D1F]/70"
  >
    <nav class="container-px flex h-16 items-center justify-between gap-3">
      <a href="/" class="flex items-center gap-2 font-semibold">
        <Picture
          src="/MxlLegacyLogo.webp"
          alt="MXL"
          class="h-6 w-6 rounded-md"
          formats={["avif", "webp"]}
        />
        <span>MXL Legacy</span>
      </a>
      <button
        class="md:hidden inline-flex items-center justify-center rounded border border-[#F4F4F4]/20 px-3 py-1.5 text-sm"
        aria-controls="mobile-menu"
        aria-expanded="false"
        data-menu-button
      >
        Menü
      </button>
      <ul class="hidden md:flex items-center gap-6 text-sm">
        {
          links.map((l) => (
            <li>
              <a
                href={l.href}
                class="relative py-1 hover:text-[#9FFE88] transition-colors after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0 after:bg-[#9FFE88] after:transition-all hover:after:w-full"
              >
                {l.label}
              </a>
            </li>
          ))
        }
      </ul>
      <a
        href="/contact"
        class="hidden md:inline-flex items-center justify-center rounded bg-[#9FFE88] text-[#201D1F] px-4 py-2 text-sm font-medium hover:opacity-90"
      >
        Mitmachen
      </a>
    </nav>
    <div id="mobile-menu" class="container-px md:hidden hidden py-2" data-menu>
      <ul class="flex flex-col gap-2 text-sm">
        {
          links.map((l) => (
            <li>
              <a
                href={l.href}
                class="block px-3 py-2 rounded hover:bg-[#F4F4F4]/10"
                data-menu-link
              >
                {l.label}
              </a>
            </li>
          ))
        }
        <li>
          <a
            href="/contact"
            class="mt-2 block px-3 py-2 rounded bg-[#9FFE88] text-[#201D1F] font-medium text-center"
          >
            Mitmachen
          </a>
        </li>
      </ul>
    </div>
  </div>
</header>

<script>
  const btn = document.querySelector("[data-menu-button]");
  const menu = document.querySelector("[data-menu]");
  const links = document.querySelectorAll("[data-menu-link]");
  if (btn && menu) {
    btn.addEventListener("click", () => {
      const isOpen = !menu.classList.contains("hidden");
      menu.classList.toggle("hidden");
      btn.setAttribute("aria-expanded", String(!isOpen));
    });
    links.forEach((a) =>
      a.addEventListener("click", () => {
        menu.classList.add("hidden");
        btn.setAttribute("aria-expanded", "false");
      }),
    );
  }
</script>
