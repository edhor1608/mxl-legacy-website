---
import BaseLayout from "../layouts/BaseLayout.astro";
import Nav from "../components/Nav.astro";
import Section from "../components/Section.astro";
import Footer from "../components/Footer.astro";
import { people } from "../data/index";
import "../styles/global.css";
import { Picture } from "astro:assets";

const page = {
  title: "Fahrer & Team",
  description:
    "Fahrer, Team-Mitglieder und Rollen der MXL Sim-Racing-Liga: Von Gr√ºndern bis zu den aktiven Fahrern.",
  canonical: "https://mxl-legacy.de/drivers",
  image: "/assets/og-cover.jpg",
  type: "website",
};
  
type CardPerson = typeof people[number];
const allPeople: CardPerson[] = people;
---

<BaseLayout {...page}>
  <Nav />
  <Section id="drivers-page" title="Fahrer & Team">
    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
      {allPeople.map((p) => {
        const href = `/drivers/${p.link}`;
        const Card = (
          <div class="rounded-lg overflow-hidden bg-white/5 border border-white/10 h-full">
            <Picture
              src={d.img}
              alt={d.name}
              width={300}
              height={300}
              class="w-full h-40 object-cover"
              formats={["avif", "webp"]}
            />
            <div class="p-3 space-y-1">
              <div class="flex items-center justify-between gap-2">
                <p class="font-medium truncate">{p.nickname}</p>
                {p.hallOfFame && (
                  <span class="text-[10px] uppercase tracking-wider text-[#9FFE88] border border-[#9FFE88]/40 rounded px-1.5 py-0.5">Hall of Fame</span>
                )}
              </div>
              <p class="text-xs text-white/70 truncate">{p.role}</p>
              <p class="text-[11px] text-white/50">{p.tag}</p>
            </div>
          </div>
        );
        return href ? (
          <a href={href} class="block focus:outline-none focus:ring-2 focus:ring-[#9FFE88]/60 rounded-lg">{Card}</a>
        ) : (
          <div>{Card}</div>
        );
      })}
    </div>
  </Section>
  <Footer />
</BaseLayout>
